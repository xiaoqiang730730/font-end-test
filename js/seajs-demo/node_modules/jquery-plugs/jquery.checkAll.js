;(function($){
    $.fn.checkAll = function(elements,callback){
        var _handler = $(this);
        var _checked = elements.filter(':checked');
        _handler.click(function(){
            var _self = $(this);
            _handler.add(elements).each(function(){
                this.checked = _self.is(':checked')
            });
            _checked = elements.filter(':checked');
            $.isFunction(callback) && callback(_checked);
        });
        elements.click(function(){
            _checked = elements.filter(':checked');
            var _status = _checked.length == elements.length;
            _handler.each(function(){
                this.checked = _status;
            });
            $.isFunction(callback) && callback(_checked);
        });
    }
})(jQuery);